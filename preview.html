<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Preview</title>
    <!-- We use the main blog's stylesheet to ensure the preview is accurate -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="preview.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body>
    <div class="preview-banner">
        <p><i class="fas fa-eye"></i> This is a PREVIEW. This page is not public. <a href="admin.html">Return to Admin Panel</a></p>
    </div>
    <main>
        <div id="preview-container" class="container">
            <!-- Article content will be rendered here by JavaScript -->
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const previewContainer = document.getElementById('preview-container');
            const urlParams = new URLSearchParams(window.location.search);
            const articleId = urlParams.get('id');

            if (!articleId) {
                previewContainer.innerHTML = '<h2>No article ID provided for preview.</h2>';
                return;
            }

            // Retrieve the article from localStorage
            const articles = JSON.parse(localStorage.getItem('blogArticles')) || [];
            const articleToPreview = articles.find(article => article._id === articleId);

            if (articleToPreview) {
                // This is a simplified render. A full implementation would reuse more rendering logic.
                const imageHTML = articleToPreview.imageUrl ? `<img src="${articleToPreview.imageUrl}" alt="Preview" class="article-image" style="max-width:100%; border-radius: 4px; margin-bottom: 1rem;">` : '';
                previewContainer.innerHTML = `
                    ${imageHTML}
                    <h2>${articleToPreview.title}</h2>
                    <p>${articleToPreview.content.replace(/\n/g, '<br>')}</p>
                `;
                document.title = `Preview: ${articleToPreview.title}`;
            } else {
                previewContainer.innerHTML = '<h2>Article not found.</h2>';
            }
        });
    </script>
</body>
</html>